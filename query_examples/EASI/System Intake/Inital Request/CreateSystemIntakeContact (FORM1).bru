meta {
  name: CreateSystemIntakeContact (FORM1)
  type: graphql
  seq: 2
}

post {
  url: {{url}}
  body: graphql
  auth: inherit
}

body:graphql {
  mutation CreateSystemIntakeContact($input: CreateSystemIntakeContactInput!) {
    createSystemIntakeContact(input: $input) {
      systemIntakeContact {
        id
        systemIntakeId
        component
        roles
        __typename
      }
      __typename
    }
  }
}

body:graphql:vars {
  {
    "input": {
      "euaUserId": "ABCD",
      "component": "Center for Clinical Standards and Quality",
      "roles": ["BUSINESS_OWNER","PRODUCT_MANAGER"],
      "systemIntakeId": "{{systemIntakeID}}",
      "isRequester": false
    }
  }
}

script:post-response {
  let responseData = res.getBody().data.createSystemIntakeContact
  
  systemIntakeContactID = responseData.systemIntakeContact.id
  
  
  bru.setVar("systemIntakeContactID", systemIntakeContactID);
  
  
  
}

settings {
  encodeUrl: true
}
