enum LockChangeType {
  ADDED
  UPDATED
  REMOVED
}

enum LockActionType {
  """
  A normal flow action
  """
  NORMAL

  """
  An administrative action
  """
  ADMIN
}

"""
Sections of the system profile form that can be locked for editing
"""
enum SystemProfileLockableSection {
  BUSINESS_INFORMATION
  IMPLEMENTATION_DETAILS
  DATA
  TOOLS_AND_SOFTWARE
  SUB_SYSTEMS
  TEAM
}

"""
Status of a locked section of the system profile form
"""
type SystemProfileSectionLockStatus {
  cedarSystemId: UUID!
  section: SystemProfileLockableSection!
  lockedByUserAccount: UserAccount!
  isAdmin: Boolean!
}

"""
Details about a change to the lock status of a system profile section
"""
type SystemProfileSectionLockStatusChanged {
  changeType: LockChangeType!
  lockStatus: SystemProfileSectionLockStatus!
  actionType: LockActionType!
}

extend type Query {
  """
  Returns an array containing the status of locked sections for a given cedar system profile form
  """
  systemProfileLockedSections(
    cedarSystemId: UUID!
  ): [SystemProfileSectionLockStatus!]!
}

extend type Mutation {
  lockSystemProfileSection(
    cedarSystemId: UUID!
    section: SystemProfileLockableSection!
  ): Boolean!

  unlockSystemProfileSection(
    cedarSystemId: UUID!
    section: SystemProfileLockableSection!
  ): Boolean!

  unlockAllSystemProfileSections(
    cedarSystemId: UUID!
  ): [SystemProfileSectionLockStatus!]!
}

type Subscription {
  onSystemProfileSectionLockStatusChanged(
    cedarSystemId: UUID!
  ): SystemProfileSectionLockStatusChanged!

  onLockSystemProfileSectionContext(
    cedarSystemId: UUID!
  ): SystemProfileSectionLockStatusChanged!
}
