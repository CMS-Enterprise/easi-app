FROM cypress/base:10 AS modules

COPY package.json /package.json
RUN npm install --dev --silent

FROM modules AS test

COPY cypress /cypress
COPY cypress.json /cypress.json
COPY tsconfig.json /tsconfig.json
COPY src /src

ENTRYPOINT ["/node_modules/.bin/cypress"]
CMD ["run"]
